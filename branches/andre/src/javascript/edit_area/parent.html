<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<title>Test Loading file</title>
<script src="edit_area_crunchy.js" type="text/javascript"> </script>
<script language="JavaScript" type="text/javascript">
editAreaLoader.init({
id: "text_area",
font_size: "11",
allow_resize: "both", 
allow_toggle: true,
language: "en",
toolbar: "new_document, save, load, |, fullscreen, |, search, go_to_line, |, undo, redo, |, select_font, |, change_smooth_selection, highlight, reset_highlight, |, help",
syntax: "python",
start_highlight: true,
load_callback:"my_load_file",
save_callback:"my_save_file",
display: "later"});
var newWindow;
function UpdateInput(text){
self.document.ParentForm.ParentField.value = text;
}
function makeNewWindow(){
newWindow = window.open("child.html", "reference_name", "height=300, width=300");
self.document.ParentForm.ParentField.value="Created child";
var _setText = editAreaLoader.setValue;
newWindow.parent.UpdateInput = UpdateInput;
newWindow.parent.form = self.document.ParentForm.ParentField;
newWindow.parent.setText = _setText;
}
function closeNewWindow(){
if(newWindow){
newWindow.close();
newWindow = null;
self.document.ParentForm.ParentField.value="Destroyed child"
}
}
function WriteChild(){
newWindow.document.ChildForm.ChildField.value="Written from parent";
}

</script>
</head>

<body>
<textarea name="text_area" id="text_area"> This is a test</textarea>
<form name="ParentForm">
<input type="button" value="Create New Window" onclick="makeNewWindow()"/>
<input type="button" value="Close New Window" onclick="closeNewWindow()"/>
<input type="text" name="ParentField"/>
<input type="button" value="Write to Child" onclick="WriteChild()"/>
</form>
</body>
</html>
