et_colour.py tests
==================

First, we define and test a function to extract the text content from
a piece of html code, converting <br/> into "\n"

    >>> import et_colour
    >>> et = et_colour.et
    >>> sample = "<pre>a\nb<br/>c<span>d</span></pre>"
    >>> pre = et.fromstring(sample)
    >>> print et_colour.extract_code(pre)
    a
    b
    cd

Next, we introduce a series of tests of increasing complexity.

    >>> sample = '<pre>print "Hello World!"</pre>'
    >>> pre = et.fromstring(sample)
    >>> wrapped_pre, py_code = et_colour.style(pre)
    >>> styled = et.tostring(wrapped_pre)
    >>> print py_code
    print "Hello World!"
    >>> print styled
    <span><pre>
    print "Hello World!"
    </pre></span>

    >>> sample = '<pre title="junk">print "Hello World!"</pre>'
    >>> pre = et.fromstring(sample)
    >>> wrapped_pre, py_code = et_colour.style(pre)
    >>> styled = et.tostring(wrapped_pre)
    >>> print py_code
    print "Hello World!"
    >>> print styled
    <span><pre title="junk">
    <span class="py_keyword">print</span><span class="py_string"> "Hello World!"</span>
    </pre></span>

In the following example, the order of the attributes is changed by
ElementTree - at least in the version used for this test.

    >>> sample = '<pre title="junk" tag="other">print <span>"Hello World!"</span></pre>'
    >>> pre = et.fromstring(sample)
    >>> wrapped_pre, py_code = et_colour.style(pre)
    >>> styled = et.tostring(wrapped_pre)
    >>> print py_code
    print "Hello World!"
    >>> print styled
    <span><pre tag="other" title="junk">
    <span class="py_keyword">print</span><span class="py_string"> "Hello World!"</span>
    </pre></span>

    >>> sample = '<pre title="junk">print "Hello World!"</pre>'
    >>> pre = et.fromstring(sample)
    >>> wrapped_pre, py_code = et_colour.style(pre, linenumber=True)
    >>> styled = et.tostring(wrapped_pre)
    >>> print py_code
    print "Hello World!"
    >>> print styled
    <span><pre title="junk">
    <span class="py_linenumber">  1 </span><span class="py_keyword">print</span><span class="py_string"> "Hello World!"</span>
    </pre></span>