<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Writing tutorials</title>
<link href="tutor.css" title="Tutor Style" type="text/css" rel="stylesheet" />
<link href="tutor_bw.css" title="Black and white"type="text/css" rel="stylesheet" />

</head>
<body>
<div id="topbar">
<img alt="" src="argh.gif" class="titleimage"/>
<span class="title">Writing tutorials</span>
</div>
<div id="navbar">
<span class="heading">Crunchy user tutorial</span>
<a href="welcome_en.html">Begin tutorial</a>
<a href="interpreter_en.html">Interpreter</a>
<a href="editor_en.html">Editor</a>
<a href="doctest_en.html">DocTest</a>
<a href="canvas_en.html">Graphics</a>
<a href="images_en.html">Image files</a>

<a href="external_en.html">External applications</a>
<span class="heading">Advanced Topics</span>

<a href="remote_en.html">Browsing</a>

<a href="config_en.html">Configuring Crunchy</a>
<a href="faq_en.html">FAQ, bugs, etc.</a>
<a href="writing_en.html">Writing tutorials</a>

<a href="/functional_tests">Tests</a>
</div>
<div id="main">
<p>So you wrote a Python tutorial, either about the language or about some library (like pygame)
or module.  Congratulations, this is hard work.  If your tutorial was written in html, with
relevant Python code inside  <code>&lt;pre&gt;</code> elements, then Crunchy can be used
to interact with it.  However, with just a tiny bit more work, you can make the interaction
with Crunchy much richer.</p>
<div class="notes">
<h4>Note</h4>
<p> This document has <b><em>not</em></b> been checked extensively; it has been adapted from the old Crunchy reference.  Some minor accuracies may be present.  Please, let us know if you do find any.
</p>
</div>

<h3>Extremely Advanced Stuff</h3>
<p>Very Little Aditional Markup, or VLAM, is the system used by Crunchy to describe its interactive elements.
 VLAM is essentially just an extended set of attributes for some common HTML tags. 
 Any .htm or .html file loaded through Crunchy 
 will have its VLAM code processed. Here's what VLAM can describe:</p>
<ul>
<li><a href="#interpreter">Interpreter</a></li>
<li><a href="#editor">Code editor</a></li>
<li><a href="#doctest">DocTest</a></li>
<li><a href="#images">Images</a></li>
<li><a href="#styling">Simple code styling</a></li>
<li><a href="#advanced">Advanced options</a></li>
</ul>
<p>A description of these is to be found just below the <em>Crunchy attributes</em> section.</p>

<h1>Crunchy attributes</h1>
<p>The following table is a summary of available "crunchy attributes"; these 
are attributes of the html tag "title".  Please refer to the <em>Crunchy user Tutorial</em>
on the left for some actual examples.</p>
<table summary="Cruncy attributes" class='summary'>
<tr><th colspan='2'>Basic Crunchy elements</th></tr>
<tr>
	<td><code>no-vlam</code></td>
	<td>Leaves the &lt;pre&gt; element <em>as is</em>.
	</td>
</tr>
<tr>
	<td><code>py_code</code> or <code>python_code</code></td>
	<td>Style the Python code inside a &lt;pre&gt; or &lt;code &gt; element.
	</td>
</tr>
<tr>
	<td><code>editor</code></td>
	<td>Inserts an editor after the &lt;pre&gt; element.</td>
</tr>
<tr>
	<td><code>doctest</code></td>
	<td>Treats the code inside the &lt;pre&gt; element as a python doctest to 
	be executed together with the user-code inside the editor.</td>
</tr>
<tr>
	<td><code>interpreter</code></td>
	<td>Inserts a Python interpreter after the &lt;pre&gt; element.  There are
	two different types of interpreters, those that share a common environment and
	those that have their own unique environment.</td>
</tr>
<tr>
	<td><code>image file</code></td>
	<td>Similar to an <code>editor</code> except that the result of the code execution is
	expected to be the creation of an image file (whose name needs to be given as an argument) 
	which will then be displayed below the editor.</td>
</tr>
    <td><code>external_link</code></td>
    <td>Used with an html anchor &lt;a&gt;; tells Crunchy to leave the link <em>as is</em>.
    If a user clicks on it, the browser will handle it directly, without Crunchy interfering.
    </td>
<tr>
</tr>
<tr><th colspan='2'>Options</th></tr>
<tr>
	<td><code>no_style</code></td>
	<td>Prevents the Python code inside the &lt;pre&gt; element from being
	styled by Crunchy.<br/>
	Can be used with: <code>interpreter, editor, doctest, image_file</code>.</td>
</tr>
<tr>
	<td><code>no-copy</code></td>
	<td>Prevents the Python code inside the &lt;pre&gt; element from being
	copied into the editor.<br/>
	Can be used with: <code> editor, image_file</code>.</td>
</tr>
<tr>
	<td><code>linenumber</code></td>
	<td>Inserts line numbers before each code line inside the &lt;pre&gt; 
	element. An optional starting number can be given.<br/>
	Can be used with: <code>python_code, py_code, interpreter, editor, doctest, image_file</code>.</td>
</tr>
<tr>
	<td><code>log_id = (some unique name)</code></td>
	<td>Instructs Crunchy to log the input and the output obtained when interacting
	with this element.  The result will be saved in the file crunchy.html located
	in the user's home directory.<br/>
	Can be used with: <code>interpreter, editor, doctest</code>.  No result is recorded
	if the <code>external</code> option is used.</td>
</tr>
<tr>
	<td><code>isolated</code></td>
	<td>Used to indicate that the interpreter will not share an environment with other that
	are present on the same page.<br/>
	Can be used with: <code>interpreter</code>.</td>
</tr>
<tr>
	<td><code>no-pre</code></td>
	<td><code>no-pre</code> does not show the code inside the &lt;pre&gt; 
	element, only inside the &lt;textarea&gt;.  Since this does not make sense 
	for a doctest option, or if 
	<code>no-copy</code> is present, it is ignored in these cases.  A 
	typical use of <code>no-pre</code> is to include a complete (long)
	listing for execution at the end of a tutorial, after the main sections 
	have been explained separately.<br/>
	Can be used with: <code>editor, image_file</code>.</td>
</tr>
<tr>
	<td><code>external</code></td>
	<td><code>external</code> tells Python to spawn a new process, as an external application.<br/>
	Can be used with: <code>editor</code>. </td>
</tr>
<tr>
	<td><code>no-internal</code></td>
	<td><code>no-internal</code>, can be used with <code>external</code> to only allow spawning an application as a separate process.  Sometimes (for example: if a tutorial makes use of a module that may not exist on the user's computer) it is useful to be able to launch a process "internally", so that error messages appear in the browser window, in which case this option
	should <b>not</b> be used.<br/>
	Can be used with: <code>editor</code>.</td>
</tr>
</table>


<h2><a id="interpreter">Interpreter</a></h2>
<p>You can request Crunchy to add a Python interpreter via <br/>
<code>&lt;pre title="interpreter [no_style] [isolated] [linenumber [=starting_number]]"&gt;</code><br/>
<code>Some Python code</code><br/>
<code>&lt;/pre&gt;</code></p>
<p> where the square brackets
indicate optional arguments.  Any number of interpreter "prompts" can 
appear within a page, and every interpreter prompt used in a given session 
shares the same environment, unless the <code>isolated</code> argument is used.  
Sharing the same environment means that, if you need to import a given module as you go through a tutorial, you only have to do it once; similarly, a variable defined in one such interpreter will be known to others, until the user clicks on a link to load a new page.</p>
<p>Any text between the <code>pre</code> tags is placed before the interpreter, in a <code>pre</code> element and styled. If the <code>linenumber</code>
option is present, a line number will appear before each line of input
code; the line numbering will start at 1 unless a different starting value is given.</p>
<p>Interpreters use the following CSS classes:</p>
<dl>
<dt>#output pre</dt>
	<dd>The output.</dd>
<dt>#output pre.stdin</dt>
	<dd>Input echoed back to the page.</dd>
<dt>#input</dt>
	<dd>The textbox used for input</dd>
</dl>
<h2><a id="editor">Code Editor</a></h2>
<p>Code in a code editor is saved in a temporary file and executed as a module in a separate process.</p>
<pre title="no_vlam">
&lt;pre title="editor [no_style] [no-copy] [no-pre] 
            [linenumber [=start_number]] [external [no-internal]]"&gt;
Some Python code

&lt;/pre&gt;</pre>
<p>
adds a code editor (html &lt;textarea&gt;) to the current page.
</p>
<p>By default, Crunchy copies the contents of the <code>pre</code> into a new 
<code>pre</code> above the editor; however, this is prevented if 
<code>no-copy</code> is present. 
If the <code>linenumber</code>
option is present, a line number will appear before each line of input
code.</p>
<p>Any text between the <code>pre</code> tags is placed before the editor, in a <code>pre</code> element to serve as a constant reference for the user.</p>
<p>Code Editors use the following CSS classes:</p>
<dl>
<dt>span.stdout</dt>
	<dd>Output from stdout (ie. normal output).</dd>
<dt>span.stderr</dt>
	<dd>Output from stderr (ie. error output).</dd>
<dt>div.term_out</dt>
	<dd>The div containing all the output.</dd>
</dl>

<h2><a id="doctest">DocTest</a></h2>
<p><code>&lt;pre title="doctest [no_style] [linenumber]"&gt;&lt;/pre&gt;</code> adds a doctest to the page; the text 
between the <code>pre</code> tags is always placed before the textarea and 
used as the doctest.</p>
<p>The output from the doctest result is further processed by Crunchy to make error messages a bit
friendlier to beginners.</p>

<p>Doctests use the following CSS classes:</p>
<dl>
<dt>span.stdout</dt>
	<dd>Output from stdout (ie. normal output).</dd>
<dt>span.stderr</dt>
	<dd>Output from stderr (ie. error output).</dd>
<dt>div.doctest_out</dt>
	<dd>The div containing all the output.</dd>
</dl>

<h2><a id="images">Images</a></h2>
<p>The required markup is as follows.</p>
<pre title="no_vlam">
&lt;pre title="image_file filename [no_style] [no-copy] [no-pre] [linenumber [=start_number]]"&gt;
Some Python code
&lt;/pre&gt;</pre>
<p>Note that the filename must be included, otherwise the code will simply be styled.
The Python code that is to be executed <b>must</b> save a file under the same name 
(the file will be saved in a temporary directory maintained by Crunchy).</p>

<h2><a id="styling">Simple code styling</a></h2>
<p>Crunchy will automatically colourize the Python code between the <code>&lt;pre ...&gt; ...&lt;/pre&gt;</code> tags, unless the combination <code>title="no_vlam"</code> appears as
an attribute to the <code>pre</code>.  Sometimes, you may want simply to 
colourize the Python code without actually inserting an interactive element.  You can do so by writing:</p>
<pre title="no_vlam">
&lt;pre title="py_code or python_code [linenumber [=startnumber]]"&gt;
...
&lt;/pre&gt;
</pre>

<p>The Python code is styled according to the following classes:</p>
<dl>
<dt>span.py_keyword</dt>
<dt>span.py_number</dt>
<dt>span.py_comment</dt>
<dt>span.py_string</dt>
<dt>span.py_variable</dt>
<dt>span.py_op</dt>
<dt>span.py_linenumber</dt>
<dt>span.py_prompt</dt>
<dt>span.py_output</dt>
</dl>
<h2><a id="advanced">Advanced options</a></h2>
<p>Some "advanced" options require hand-coding and should rarely be used by
tutorial writers.</p>
<h3>Fetching a local tutorial</h3>
<p>If one wants to insert a "browser" object to load a local tutorial,
all that is required is to write:</br>
<code>&lt;span title="load local"&gt;</code> <em>space</em> <code>&lt;/span&gt;</code></p>
<h3>Fetching a remote tutorial</h3>
<p>If one wants to insert a input box to load a remote tutorial,
all that is required is to write:</br>
<code>&lt;span title="load remote"&gt;</code> <em>optional url</em> <code>&lt;/span&gt;</code></p>
<h3>Fetching a local tutorial to edit it</h3>
<p>If one wants to insert a "browser" object to load a local tutorial and
edit it to insert interactive elements,
all that is required is to write:</br>
<code>&lt;span title="edit tutorial"&gt;</code> <em>space</em> <code>&lt;/span&gt;</code></p>

<div class="wide-warning">
<h4>Custom menus are disabled</h4>
<p>The following option to change the default menu is temporarily disabled
until the security issues are all sorted out.</p>
</div>

<h3>Changing the default menu</h3>
<p>Changing the default menu can be done by including<br/>
<code>&lt;meta name="crunchy_menu" content="filename"&gt;</code> in the html <code>&lt;head&gt;</code> element.  The file designated by <code>filename</code> must be a valid
html file having a well defined structure.  The following is the file currently used by
Crunchy.</p>
<pre title="no_vlam">
&lt;html&gt;
&lt;head&gt;
&lt;link href="/menu_basic.css" rel="stylesheet" type="text/css" /&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id="crunchy_menu_container"&gt;
&lt;ul&gt;
&lt;li&gt; &lt;a href="/"&gt;&lt;img src="/crunchy.png" height="47" width="147" alt="Home"/&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/exit"&gt;Quit&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>Crunchy looks for the menu inside the <code>&lt;div&gt;</code>, and the menu styling
in the <code>&lt;head&gt;</code>.</p>
</div>
</body>
</html>
