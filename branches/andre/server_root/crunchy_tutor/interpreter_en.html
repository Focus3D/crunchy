<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Crunchy Interpreter</title>
<link href="tutor.css" title="Tutor Style" type="text/css" rel="stylesheet" />
<link href="tutor_bw.css" title="Black and white"type="text/css" rel="stylesheet" />

</head>
<body>
<div id="topbar">
<img alt="" src="suprised.gif" class="titleimage"/>
<span class="title">Prompting Python</span>
</div>
<div id="navbar">
<span class="heading">Crunchy user tutorial</span>
<a href="welcome_en.html">Begin tutorial</a>
<a href="interpreter_en.html">Interpreter</a>
<a href="editor_en.html">Editor</a>
<a href="doctest_en.html">DocTest</a>
<a href="canvas_en.html">Graphics</a>
<a href="images_en.html">Image files</a>
<a href="external_en.html">External applications</a>
<span class="heading">Advanced Topics</span>
<a href="remote_en.html">Browsing</a>
<a href="config_en.html">Configuring Crunchy</a>
<a href="writing_en.html">Writing tutorials</a>
<a href="/functional_tests">Tests</a>
</div>
<div id="main">
<p>I am assuming that you are viewing this page while using Crunchy.  If not, all you will see is
a somewhat traditional page with some black text in it.  Any reference to a Python interpreter
that I make will seem rather odd.</p>
<h3>An almost typical introduction to Python</h3>
<p>I will not begin this introduction to Python the standard way, like it is done with all
other languages, by asking you to write the traditional</p>
<pre title="py_code">
print "Hello World!"
</pre>
<p>No, this would just be too boring and neither worthy of Python nor of Crunchy.  Instead, I suggest
that you type the following code in the interpreter prompt that appears just below it.</p>
<pre title="interpreter">
&gt;&gt;&gt; answer = 211 // 5
&gt;&gt;&gt; print answer
</pre>
<p>If you haven't made any mistake, Python will respond with <b>
The Answer to The Ultimate Question Of Life, the Universe and Everything,</b>  <small>at least according to the Hitchhiker's Guide to the Galaxy.</small> 
The Python interpreter you just used was actually inspired by and adapted from some great work by Robert Brewer. You may have also 
noticed that the Python code was displayed in colour, with Python keywords in 
blue, numbers in black, operators in reddish brown, etc., quite unlike the boring all
black stuff of the original html page.</p>
<p>Impressive, isn't it?  Now try the following in this other interpreter.</p>
<pre title="interpreter">
&gt;&gt;&gt; print answer
</pre>
<p>Yes, <tt>WE ARE THE BORG</tt>.  Crunchy's Borg interpreters all share the same state so that variables entered in one of them are known to all the other
interpreters on the same page.  However, if you are in search of a bit of 
individuality, you can try the same experiment again below.</p>
<pre title="interpreter isolated">
&gt;&gt;&gt; print answer
</pre>
<p>Python/Crunchy gave you an error message, as it did not know the answer
to the ultimate question.  Generally, you should only see Borg type interpreters used in Crunchy.  However, you should keep in mind that there are other possibilities.</p>
<p>After seeing these amazing feats, I am convinced that you will want to purchase Crunchy!</p>
<blockquote><i> I'm not interested in your sales! I have to protect the general public!</i><br />
<small>From the Monty Python Crunchy Frog sketch.</small></blockquote>
<p>Crunchy is not for sale: it is free software.  However, it is not designed for the "general public".  Using a Python interpreter on a computer can lead to unwanted results, depending on the code that is being executed. 
[<code title="py_code">import os:</code> <span style="color:red">use with caution!</span>]  We can not be held responsible for any negative consequence of code you type in for Crunchy/Python to execute.</p>
<h3>Slightly advanced stuff</h3>
<p>Yes, it's ok to read on.  I am not going to introduce really super advanced stuff here.</p>
<p>You can type in more than one line of code and interact with the interpreter in various ways.  In the example below, I have tried to show both what you should type in, and a preview of the response from Crunchy.  Try this example and notice how, at some point, a pop-up "help window" will appear at the top left.  You can make it go away by clicking on the 
<span style="font:sans-serif;">X</span> or simply keep on typing until it goes away on its own, except for the last three examples.</p>
<pre title="interpreter linenumber">
&gt;&gt;&gt; name = raw_input("What is your name?")  # note: use only ascii characters
<span class="stdin">What is your name?</span>Your_name_should_appear_here
&gt;&gt;&gt; print name
Your_name_should_appear_here
&gt;&gt;&gt; for i in range(4):
...     print i
... 
0
1
2
3
&gt;&gt;&gt; import sys
&gt;&gt;&gt; help(sys)   # click on the X when you're finished reading
&gt;&gt;&gt; sys?        # shortcut for help.
&gt;&gt;&gt; sys.exit?
</pre>
<p>You now know enough to use the interpreter to learn about Python following a "real" Python tutorial.  You can either do this by go to the 
<a href="http://docs.python.org/tut/tut_en.html">the official Python tutorial</a>
on the python.org site or continue to learn about Crunchy by clicking on the editor link on the left.</p>
<h3>Advanced stuff</h3>
<p>Starting with version 0.9.2, Crunchy's interpreter knows some new tricks that can be very useful ... but potentially tricky.
Consider the following.</p>
<pre title="interpreter">
&gt;&gt;&gt; name = "Guido van Rossum"
&gt;&gt;&gt; print name
Guido van Rossum
</pre>
<p>Instead of having only two lines of text, imagine we had 20 lines.  To reproduce this example would require lots of typing.
Using some advanced feature of Crunchy, you can save yourself a fair bit of typing.
Here is how: <b><em>double-click</em></b> inside the input "box" for the interpreter.
You should see it transform into a larger box (an html textarea for those interested)
with two buttons at the buttom.
One button copies the code shown above (just the input - not the output) 
inside the textarea, ready for editing or just executing.  
The other button feeds the code to the interpreter. 
Try it out!   You can double-click a number of times and repeat the experience as often as you want.
</p>
<p>While this is a neat trick, there are a couple of caveats: Crunchy takes each line as though you had typed it yourself, one line at a time, in an interactive session.</p>
<h4 style="color:red">Caveat #1 </h4>
<p>Try the double-click, copy code and execute trick with the following.</p>
<pre title="interpreter">
&gt;&gt;&gt; name = raw_input("Enter your name: ")
&gt;&gt;&gt; print "YOUR NAME IS", name
</pre>
<p>Now, try it again here to see more clearly what happened:</p>
<pre title="interpreter">
&gt;&gt;&gt; print "Your name is: ", name
</pre>
<p>As you should see, Crunchy takes the second line as your answer to the first. 
This is unlikely to be what you want.</p>
<p><b>First lesson:</b> do not use <code title="py_code">input()</code> or 
<code title="py_code">raw_input()</code> inside a box obtained by double-clicking
on an interpreter.</p>

<h4 style="color:red">Caveat #2 </h4>
<p>Try again with the following example to double click, copy the code
and execute it.  You will find that the interpreter will not be able to
handle the result and will effectively shut down.  Normally, you would have
to reload the page to try again; however, I will give you another copy
to work with just below.</p>
<pre title="interpreter linenumber">
&gt;&gt;&gt; def flatten(seq):
...     """flatten(sequence) -> list
... 
...     Returns a single, flat list which contains all elements retrieved
...     from the sequence and all recursively contained sub-sequences
...     (iterables).
... 
...     Examples:
...     >>> flatten([[[1,2,3]], [4,5], [6], 7, (8,9,10)])
...     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
...     """
... 
...     result = []
...     for elem in seq:
...         if hasattr(elem, "__iter__") and not isinstance(elem, basestring):
...             result.extend(flatten(elem))
...         else:
...             result.append(elem)
...     return result
...
&gt;&gt;&gt; flatten([[[1,2,3]], [4,5], [6], 7, (8,9,10)])
</pre>
<p>The problem is due to the empty line (12).  Imagine that you were typing in the code yourself, line by line.
When you enter an empty line, the interpreter interprets this as the end of
a function definition (or a loop, or if statement, etc.).
To avoid this problem, we need to have something with no empty lines.
</p>
<pre title="interpreter linenumber">
&gt;&gt;&gt; def flatten(seq):
...     """flatten(sequence) -> list
... 
...     Returns a single, flat list which contains all elements retrieved
...     from the sequence and all recursively contained sub-sequences
...     (iterables).
... 
...     Examples:
...     >>> flatten([[[1,2,3]], [4,5], [6], 7, (8,9,10)])
...     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
...     """
...     result = []
...     for elem in seq:
...         if hasattr(elem, "__iter__") and not isinstance(elem, basestring):
...             result.extend(flatten(elem))
...         else:
...             result.append(elem)
...     return result
...
&gt;&gt;&gt; flatten([[[1,2,3]], [4,5], [6], 7, (8,9,10)])
</pre>
<p><b>Second lesson:</b> beware of empty lines inside a box obtained by double-clicking on an interpreter.</p>


<h3>Advanced stuff, for tutorial writers</h3>
<p>In order to instruct Crunchy to insert an interpreter below a Python code sample, one uses the <code>title</code> attribute as follows:</p>
<p><code>&lt;pre title="interpreter [isolated] [linenumber [=starting_number]]"&gt;</code><br/>
<code>Some Python code</code><br/>
<code>&lt;/pre&gt;</code></p> <p> where the square brackets
indicate optional arguments.  Any number of interpreter "prompts" can 
appear within a page, and every interpreter prompt used in a given session 
shares the same environment, unless the <code>isolated</code> argument is used.  
Sharing the same environment means that, if you need to import a given module as you go through a tutorial, you only have to do it once; similarly, a variable defined in one such interpreter will be known to others, until the user clicks on a link to load a new page.</p>
<p>Any text between the <code>pre</code> tags is placed before the interpreter, in a <code>pre</code> element and styled. If the <code>linenumber</code>
option is present, a line number will appear before each line of input
code; the line numbering will start at 1 unless a different starting value is given.</p>

</div>
</body>
</html>
