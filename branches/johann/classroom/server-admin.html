<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/xhtml1-strict.dtd">
<html>
	<head>
		<script type="text/javascript" src="server-admin.js" />
		<style>
body{
	font-family: sans;
	font-size: 10pt;
}
#loginBox {
	background-color: #297ACC;
	float: right;
	padding: 1em;
}

#logoutBox {
	background-color: #297ACC;
	float: right;
	padding: 1em;
	display: none;
}

#userListContainer {
	margin: 0;
	display: none;
}

#userList {
	width: 98%;
}

.username_disp {
	width: 10%;
}

#userList td {
	border-bottom: 1px white dotted;
	padding: 0.1em;
}

.blank_input {
	color: #BFBFBF;
	font-style: italic;
}

.tab_header_selected {
	background-color: #297ACC;
	padding-top: 0.2em;
	padding-bottom: 0em;
	padding-left: 0.5em;
	padding-right: 0.5em;
	margin:0;
	cursor: pointer;
}

.tab_header {
	background-color: #7AA3CC;
	border-width: 0;
	padding-top: 0;
	padding-bottom: 0em;
	padding-left: 0.5em;
	padding-right: 0.5em;
	margin:0;
	cursor: pointer;
}

.tab_header:hover {
	background-color: #7AA3CC;
	border-width: 0;
	padding-top: 0.2em;
	padding-bottom: 0em;
	padding-left: 0.5em;
	padding-right: 0.5em;
	margin:0;
	cursor: pointer;
}
.tab_header_disabled {
	background-color: #7AA3CC;
	color: #4D4D4D;
	border-width: 0;
	padding-top: 0;
	padding-bottom: 0em;
	padding-left: 0.5em;
	padding-right: 0.5em;
	margin:0;
	cursor: pointer;
}

button {
	background-color: #7AA3CC;
	border: 1px #0066CC solid;
}


input {
	background-color: white;
	border-width:1px;
	border: 1px #0066CC solid;
	padding: 2px;
}

textarea {
	background-color: white;
	border-width:1px;
	border: 1px #0066CC solid;
	padding: 2px;
}

select {
	background-color: white;
	border: 1px #0066CC solid;
}

h1 {
	color: black;
	font-size: 20pt;
}

#loading {
	right: 0;
	top: 0;
	position: fixed;
	background-color: #FF0000;
	display: none;
}

#tabContainer {
	display: none;
}

#tabBodyContainer {
	background-color: #297ACC;
	padding: 1em;
}

#settingsContainer {
	display: none;
}

#rootWarning {
	display: none;
	background-color: red;
	font-size: 14pt;
}
		</style>
		<title>Crispy</title>
	</head>
	<body>
		<div id="loading">
			Loading...
		</div>
		<div id="loginBox">
			<table>
				<tr>
					<td>Login:</td>
					<td></td>
				</tr>
				<tr>
					<td>Username: </td>
					<td><input type="text" id="username" ></input></td>
				</tr>
				<tr>
				
					<td>Password: </td>
					<td><input type="password" id="password" onkeydown="catch_enter(event, doLogin)"></input></td>
				</tr>
				<tr>
					<td><button onclick="doLogin()">Login</button></td>
					<td></td>
				</tr>
				<tr>
					<td>Or create a new account:</td>
					<td></td>
				</tr>
				<tr>
					<td>Username: </td>
					<td><input class="login_input" type="text" id="add_username" ></input></td>
				</tr>
				<tr>
					<td>Password: </td>
					<td><input class="login_input" type="password" id="add_password1" ></input></td>
				</tr>
				<tr>
					<td>Confirm password:</td>
					<td><input class="login_input" type="password" id="add_password2" onkeydown="catch_enter(event, doAddUser)"></input></td>
				</tr>
				<tr>
					<td><button onclick="doAddUser()">Add User and log in</button></td>
					<td></td>
				</tr>
			</table>
		</div>
		<div id="logoutBox">
			logged in as
			<span id="username_display">username goes here</span>
			&nbsp;
			<button onclick="doLogout()">log out!</button>
			<br /><br />
			<button onclick="change_user_password()" id="changePasswd">change password</button>
			&nbsp;&nbsp;			
			<select size="0">
			<option id="apply_tag_option_current">Apply tag</option>
			<option>test2</option>
			</select>
		</div>
		<h1>Crunchy Classroom Server Admin Tool (aka Crispy (no, it isn't an acronym!))</h1>
		<p>This page is a dynamic HTML page that loads data using flashy AJAX-fu! (actually XML-RPC - beautiful stuff) 
		It should never have to reload. The individual elements below will be collapsible eventually.
		This page probably only works in Firefox (developed and tested on Gecko/20060601) (actually I jst tested it and it works under Konqueror - and so probably on Safari too).
		Crispy is a temporary name for this project - pending some discussion on its future direction.
		</p>
		<br />
		<div id="siteText">Site specific text will go here.</div>
		<br />
		<div id="rootWarning">
		WARNING: The root password is currently set to its default value.
		This is a serious security vulnarability: please do something about it. 
		</div>
		<br />
		<div id="tabContainer">
			<span id="tabHeaderContainer"><span class="tab_header_selected" onclick="switch_tab('userList')" id="userListTab">User Admin</span><span class="tab_header" onclick="switch_tab('settings')" id="settingsTab">Server Settings</span><span class="tab_header" onclick="switch_tab('userLog')" id="userLogTab">User Log</span></span>
			<div id="tabBodyContainer">
				<div id="userListContainer">
					<button onclick="listUsers()" style="float:right;">Refresh user list</button>
					<input type="checkbox" onchange="toggle_select_all()" id="all_select">select all</input>
					&nbsp;&nbsp;
					<select size="0">
						<option id="apply_tag_option">Apply tag</option>
						<option>test2</option>
					</select>
					&nbsp;&nbsp;
					Filter
					<select size="0">
						<option id="filter_by_all">All</option>
						<option>test2</option>
					</select>
					&nbsp;&nbsp;
					<button onclick="delete_seleted_users()">Delete Selected</button>
					&nbsp;&nbsp;
					<input type="text" id="quick_add_username" onkeydown="catch_enter(event, quick_add_user)"/>
					<button onclick="quick_add_user()">Add user</button>
					<br />
					<p>#TODO: deleting users, selecting all, applying tags, filtering</p> 
				</div>
				<div id="settingsContainer">
					<table>
						<tr>
							<td>Default Password: </td><td><input type="text" id="default_password"></input></td><td><button>Apply (#TODO)</button></td>
						</tr>
						<tr>
							<td>Site Name: </td><td><input type="text" ></input></td><td><button>Apply (#TODO)</button></td>
						</tr>
						<tr>
							<td>Site Description: </td><td><textarea rows="10" cols="80"></textarea></td><td><button>Apply (#TODO)</button></td>
						</tr>
					</table>
				</div>
				<div id="userLogContainer">
					<p>User log will go here.</p>
				</div>
			</div>
		</div>
		<div 
	</body>
</html>